<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8">
  <title th:text="${news.title}">뉴스 상세</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/news-list.css"> <!-- 팝업 스타일 그대로 -->
</head>
<body>

<!-- 모달처럼 보이게 항상 block -->
<div class="modal" style="display: block;">
  <div class="modal-content">

    <!-- 닫기 버튼 -->
    <span class="close-btn" onclick="window.history.back();">&times;</span>

    <!-- 뉴스 iframe 본문 -->
    <iframe th:src="${news.url}" width="100%" height="600px" style="border: none;"></iframe>

    <!-- 댓글 영역 -->
    <div class="comment-section">
      <h3>총 <span th:text="${replies != null ? #lists.size(replies) : 0}">0</span>개의 의견</h3>
      <form id="commentForm" class="comment-form" th:action="@{/api/v1/comment/create}" method="post">
        <input type="hidden" name="newsId" th:value="${news.id}" />
        <input type="text" name="content" placeholder="의견을 작성해주세요." required />
        <button type="submit">의견 등록</button>
      </form>
      <ul id="commentList">
        <li th:each="reply : ${replies}">
          <strong th:text="${reply.writerEmail}">user</strong>:
          <span th:text="${reply.content}">내용</span>
        </li>
      </ul>
    </div>

    <!-- 관련 글 작성 버튼 -->
    <div class="modal-actions" style="text-align: right;">
      <a th:href="@{'/post/write?newsId=' + ${news.id}}" class="write-post-btn">관련 글 작성</a>
    </div>

  </div>
</div>
<script src="/js/news-list.js"></script>
</body>
</html>
