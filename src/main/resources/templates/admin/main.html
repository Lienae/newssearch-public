<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>뉴스퀘어 관리자 대시보드</title>
  <link rel="stylesheet" href="/css/admin-main.css" />
</head>
<body>

<header>
  <div th:replace="~{fragments/header :: header}"></div>
</header>

<div class="dashboard-container">
  <div class="box">
    <h3>최근 등록 기사</h3>
    <div class="scroll-wrapper">
      <div class="category-row">
        <div class="category-block" th:each="news : ${recentNews}">
          <h3 class="category-title" th:text="${news.category.name()}">카테고리</h3>
          <div class="news-list">
            <div class="news-card">
              <!-- 이미지 URL, 없으면 기본 이미지 -->
              <img th:src="@{${news.imageUrl}}" onerror="this.src='/img/default.png'" alt="뉴스 이미지" />
              <a th:href="@{/admin/news/edit(id=${news.id})}">
                <h4 th:text="${news.title}" class="ellipsis">뉴스 제목</h4>
              </a>
              <div class="news-meta" th:text="${news.mediaCompany.name()}">언론사</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="box board-box">
    <h3>게시판 최근글</h3>
    <div class="scroll-box">
      <ul class="board-list">
        <li th:each="board : ${recentBoardList}">
          <a th:href="@{'/admin/boards/edit?id=' + ${board.id}}">
            [<span th:text="${board.newsCategory != null ? board.newsCategory.name() : 'N/A'}">카테고리</span>]
            <span th:text="${board.title}">게시글 제목</span>
          </a>
          <span class="meta">
            작성자: <span th:text="${board.authorName}">작성자명</span> |
            <span th:text="${#temporals.format(board.createdDate, 'yyyy-MM-dd')}">작성일</span>
          </span>
        </li>
      </ul>
    </div>
  </div>

  <div class="box full-width keyword-network-box">
    <h3>뉴스 및 게시글 대시보드</h3>
    <div class="keyword-network-content">
      <p>뉴스/게시글의 카테고리별 통계를 확인하려면 아래 버튼을 클릭하세요.</p>
      <button class="keyword-network-btn" onclick="window.open('http://kibana.3rdproject.o-r.kr/app/r/s/T4L8P', '_blank')">
        대시보드 열기
      </button>
    </div>
  </div>


</div>

<!-- Floating Button for Modal -->
<button id="openAdminJobsModal" class="floating-btn">🛠</button>

<!-- Modal 구조 -->
<div id="adminJobsModal" class="modal">
  <div class="modal-content">
    <span class="close" id="closeModal">&times;</span>
    <h2>처리해야 할 작업 목록</h2>
    <ul class="job-list">

    </ul>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="/js/admin-main.js"></script>
</body>
</html>
